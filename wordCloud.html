<html>
<head>
  <link rel="stylesheet" type="text/css" href="/css/wordcloud.css">
  <script src = "js/wordcloud2.js"></script>
  <script src="/socket.io/socket.io.js"></script>
</head>
<body>
  <script>
    var socket = io('/screen-game');
    var colorList = ['#68b5ff','#97f9fc','#f9f9ff'];
    var listaPreguntas = ["¿Cual es el valor de Valparaíso?",
    "¿Cuales son las amenazas de Valparaíso?",
    "¿Como podria mejorar Valparaíso?"];

    var onUpdate = function(msg){
      var canvas = document.getElementById('my_canvas');

      var pregunta = listaPreguntas[msg.index];
      var overlay = document.getElementById('canvas_overlay');
      var ctx = overlay.getContext("2d");
      ctx.clearRect(0, 900, canvas.width, canvas.height);
      ctx.shadowBlur=15;
      ctx.shadowColor="black";
      ctx.font = "45px Arial";
      ctx.fillStyle = "white";
      ctx.textAlign="center";
      ctx.fillText(pregunta,canvas.width/2,1040);


      var wordlist = msg.wordSea;
      var currentList = msg.index;
      console.log(wordlist.length);
      console.log (wordlist);
      WordCloud(canvas, {
        list: wordlist,
        drawOutOfBound:false,
        color: function(word, weight){
           var i = Math.floor(Math.random()*colorList.length);
           return colorList[i];
         },
         gridSize: 16,
         origin: [canvas.width/2,canvas.height/2],
         rotateRatio: 0.5,
         rotationSteps: 2,
         backgroundColor: '#020066'
       });
    };
    socket.on('update',onUpdate);
  </script>
  <canvas id='my_canvas' class="overlay"  width="1920" height="1080"></canvas>
  <canvas id='canvas_overlay' class = "overlay" width="1920" height="1080"></canvas>
</body>
</html>
